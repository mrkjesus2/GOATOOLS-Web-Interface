{% extends 'goatoolsgui/base.html' %}

{% block content %}

{% if goids or goids_2d %}
  <!--
    Nav Tabs
   -->
  <ul id="results-tabs" class="nav nav-tabs results__nav" role="tablist">
    <li role="presentation" class="active">
      <a href="#table" id="table-tab" role="tab" data-toggle="tab" aria-controls="table" aria-expanded="true">Table</a>
    </li>
    <li role="presentation">
      <a href="#plots" id="plots-tab" role="tab" data-toggle="tab" aria-controls="plots">Plots</a>
    </li>
    <!-- TODO: Not entirely sure that the download link shouldn't be here -->
    <!-- <li role="presentation" class="results__links pull-right">
      <a class="btn btn-primary" href="{% url 'goatoolsgui:sendfile' %}">Get xls file</a>
    </li> -->
  </ul>

  <div id="results-tab-content" class="tab-content">
    <!--
      Results Table
     -->
    <div id="table" class="tab-pane fade in active" role="tabpanel" aria-labelledby="table-tab">
      <div id="tableBlock" class="table-container">
        <table id="results-table" class="table table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <th>hd</th>
              <th>NS</th>
              <th>dcnt</th>
              <th>level</th>
              <th>depth</th>
              <th>GO</th>
              <th>D1</th>
              <th>GO_name</th>
            </tr>
          </thead>
          {% if goids %}
            <!--
            Table body when provided a 1d list
            -->
            <tbody>
              {% for goid in goids.json_data %}
                <!-- Given a list
                    ['0': 'format_txt', '1': 'hdr_idx', '2': 'is_hdrgo', '3': 'is_usrgo',
                     '4': 'hdr1usr01', '5': 'NS', '6': 'dcnt', '7': 'level', '8': 'depth',
                     '9': 'GO', '10': 'D1', '11': 'GO_Name']
                -->
                <tr class="{% if goid.4 %} go-header {% endif %}">
                  <td>{{goid.4}}</td>
                  <td>{{goid.5}}</td>
                  <td>{{goid.6}}</td>
                  <td>{{goid.7}}</td>
                  <td>{{goid.8}}</td>
                  <td>{{goid.9}}</td>
                  <td>{{goid.10}}</td>
                  <td>{{goid.11}}</td>
                </tr>
              {% endfor %}
            </tbody>
          {% endif %}
          {% if goids_2d %}
          <!--
          Table body when provided a 1d list
          -->
            <tbody>
              {% for section in goids_2d.json_data %}
                <tr class="go-section">
                  <td colspan="8">{{section.0}}</td>
                </tr>
                  {% for goid in section.1 %}
                    <tr class="{% if goid.4 %} go-header {% endif %}">
                      <td>{{goid.4}}</td>
                      <td>{{goid.5}}</td>
                      <td>{{goid.6}}</td>
                      <td>{{goid.7}}</td>
                      <td>{{goid.8}}</td>
                      <td>{{goid.9}}</td>
                      <td>{{goid.10}}</td>
                      <td>{{goid.11}}</td>
                    </tr>
                  {% endfor %}
              {% endfor %}
            </tbody>
          {% endif %}
        </table>
      </div>
      <!--
        Links
       -->
      <div class="results__links">
        <!-- <a href="#">Citation Link</a> -->
        <a class="btn btn-primary" href="{% url 'goatoolsgui:sendfile' %}">Download File</a>
      </div>
    </div>
      <!--
      Display the plot images
     -->
    <div id="plots" class="tab-pane fade" role="tabpanel" aria-labelledby="plots-tab">
      <!-- Progress Bar for image work -->
      <div id="progress" class="progress">
        <div id="progress-bar" class="progress-bar progress-bar-striped" role="100" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          Fetching the images
        </div>
        <span class="sr-only">0% complete</span>
      </div>
      <!-- Images to be added by AJAX request to  showPlots view -->
    </div>

  </div>
{% endif %}

{% endblock %}
